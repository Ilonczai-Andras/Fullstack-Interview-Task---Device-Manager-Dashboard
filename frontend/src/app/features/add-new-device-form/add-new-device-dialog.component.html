<div class="card">
  <p-button (click)="showDialog()" label="Add new device"></p-button>

  <p-dialog
    [(visible)]="visible"
    [modal]="true"
    [style]="{ width: '25rem' }"
    [closable]="true"
    (onHide)="closeDialog()"
  >
    <ng-template pTemplate="header">
      <div class="dialog-header">
        <span class="dialog-title">Device Information</span>
      </div>
    </ng-template>

    <form [formGroup]="deviceForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="form-group">
        <label for="name" class="form-label">Name</label>
        <input
          pInputText
          id="name"
          class="form-input"
          formControlName="name"
          placeholder="Enter device name"
          [class.ng-invalid]="isFieldInvalid('name')"
          [class.ng-valid]="isFieldValid('name')"
        />
        <div class="error-message" *ngIf="isFieldInvalid('name')">
          {{ getFieldError("name") }}
        </div>
      </div>

      <div class="form-group">
        <label for="type" class="form-label">Type</label>
        <input
          pInputText
          id="type"
          class="form-input"
          formControlName="type"
          placeholder="Enter device type"
          [class.ng-invalid]="isFieldInvalid('type')"
          [class.ng-valid]="isFieldValid('type')"
        />
        <div class="error-message" *ngIf="isFieldInvalid('type')">
          {{ getFieldError("type") }}
        </div>
      </div>

      <div class="form-group">
        <label for="ip" class="form-label">IP Address</label>
        <input
          pInputText
          id="ip"
          class="form-input"
          formControlName="ip"
          placeholder="192.168.1.100"
          [class.ng-invalid]="isFieldInvalid('ip')"
          [class.ng-valid]="isFieldValid('ip')"
        />
        <div class="error-message" *ngIf="isFieldInvalid('ip')">
          {{ getFieldError("ip") }}
        </div>
      </div>

      <div class="form-group">
        <label for="location" class="form-label">Location</label>
        <input
          pInputText
          id="location"
          class="form-input"
          formControlName="location"
          placeholder="Enter device location"
          [class.ng-invalid]="isFieldInvalid('location')"
          [class.ng-valid]="isFieldValid('location')"
        />
        <div class="error-message" *ngIf="isFieldInvalid('location')">
          {{ getFieldError("location") }}
        </div>
      </div>
    </form>

    <ng-template pTemplate="footer">
      <p-button
        label="Cancel"
        [text]="true"
        severity="secondary"
        (click)="closeDialog()"
        type="button"
      ></p-button>
      <p-button
        label="Save"
        [outlined]="true"
        severity="primary"
        (click)="onSubmit()"
        [disabled]="!deviceForm.valid"
        type="button"
      ></p-button>
    </ng-template>
  </p-dialog>
</div>
